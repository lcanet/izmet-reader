<div class="articles-view">
    <script type="text/ng-template" id="feedDetail.html">
        <div style="font-size: 1em; font-weight: normal">
        <h4>
            <a target="_blank" href="{{selectedFeed | feedUrl}}">
                {{selectedFeed.name}}
            </a>
        </h4>
        <img ng-src="{{ selectedFeed | imageLink }}" height="16" />
        <p>
            {{selectedFeed.description}}
        </p>
        <p>
            Type: <em>{{selectedFeed.type}}</em>  <img ng-src="{{ selectedFeed | iconLink }}" height="16" class="icon"/>

            <br/>
            Last poll: <em>{{selectedFeed.last_poll | date:'medium' }} </em> (frequency: <em>{{selectedFeed.poll_frequency}}</em> minutes)
        </p>
        </div>
    </script>

    <div class="feed-toolbar"  ng-show="currentFeedId != null">
        <a class="btn btn-small" href="" ng-click="markAllAsRead()">Mark all as read</a>
        <a class="btn btn-small" href="" ng-click="toggleUnread(true)" ng-show="unreadOnly == false">
            Show only unread
        </a>
        <a class="btn btn-small" href="" ng-click="toggleUnread(false)" ng-show="unreadOnly == true">
            Show all
        </a>
        <a class="btn btn-small btn-danger" href="" ng-click="deleteFeed()" ng-show="selectedFeed != null">
            Delete feed
        </a>
    </div>

    <header ng-show="currentFeedId != null">
        <span ng-show="selectedFeed != null">
            <span class="feed-title">
               {{selectedFeed.name}}
            </span>
            &nbsp; - &nbsp;
            <span class="description">
                <a title="Informations"
                   data-placement="bottom"
                   bs-popover="'feedDetail.html'">
                    {{selectedFeed.description | ellipsis:80}}
                    <i class="icon icon-h-sign"></i>
                </a>
            </span>
        </span>
        <span ng-hide="selectedFeed != null">
            All articles
        </span>
    </header>

    <div class="no-articles" ng-show="articles.length == 0">
        No articles found
    </div>

    <div class="articles-list" infinite-scroll-distance="3"
         infinite-scroll-immediate-check="false"
         infinite-scroll="getNextPage()">
        <div ng-repeat="article in articles" class="article" autoscroll="article.id">
            <div class="article-header row-fluid" ng-class="getClassForArticleHeader(article)"
                 ng-click="selectArticle(article)">
                <div class="span2">
                    {{article.feed.name}}
                </div>
                <div class="span8">
                    {{article.title | titleFilter}}
                    <span class="star" ng-class="isArticledStarred(article)" ng-click="toggleStar(article)"></span>
                </div>
                <div class="span2">
                    {{article | ago:'article_date' }}
                    <span class="pull-right">
                        <a href="" ng-click="scrollToTop($event)">
                            <i class="icon icon-chevron-up"></i>
                        </a>
                        &nbsp;&nbsp;

                    </span>
                </div>
            </div>
            <detailbox detailbox-show="currentArticle == article"
                       detailbox-content="detail-box"
                        class="content">
            </detailbox>

        </div>

        <div id="detail-box">
            <h3>
                <a target="_blank" href="{{currentArticle.url}}">{{currentArticle.title}}</a>
                <span class="star-big" ng-class="isArticledStarred(currentArticle)" ng-click="toggleStar(currentArticle)"></span>
            </h3>
            <span>
                {{currentArticle.article_date | date:'medium' }}
            </span>

            <span ng-bind-html="currentArticle.content | fixLinks"></span>
        </div>
    </div>
</div>